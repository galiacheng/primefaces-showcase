<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                template="./template.xhtml">

    <ui:define name="head">
        <style type="text/css">
            .value {
                font-weight: bold;
            }
        </style>
    </ui:define>

    <ui:define name="title">
        DataGrid - <span class="subitem">MultiViewState</span>
    </ui:define>

    <ui:define name="description">
        MultiViewState feature enables DataGrid to maintain its state across pages by setting multiViewState attribute to true. In this demo, manipulate use pagination, then visit another page and then come back to this page. DataGrid state should remain as you've left it.
    </ui:define>

    <ui:param name="documentationLink" value="/components/datagrid"/>

    <ui:define name="implementation">
        <div class="productd">
            <h:form id="form">
                <p:messages id="messages"/>

                <p:commandButton value="Clear multiViewSate" action="#{dataGridView.clearMultiViewState}"
                                 update="@form"/>

                <br/><br/>

                <p:dataGrid var="product" value="#{dataGridView.products}" columns="3" layout="grid"
                            rows="12" paginator="true" id="products"
                            paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                            rowsPerPageTemplate="6,12,16" multiViewState="true">

                    <f:facet name="header">
                        Products for Sale
                    </f:facet>

                    <p:panel header="#{product.name}" style="text-align:center">
                        <h:panelGrid columns="1" style="width:100%">
                            <p:graphicImage name="demo/images/product/#{product.image}"/>

                            <h:outputText value="$#{product.price}"/>

                            <p:commandLink update=":form:productDetail" oncomplete="PF('productDialog').show()"
                                           title="View Detail">
                                <h:outputText styleClass="pi pi-search" style="margin:0 auto;"/>
                                <f:setPropertyActionListener value="#{product}" target="#{dataGridView.selectedProduct}"/>
                            </p:commandLink>
                        </h:panelGrid>
                    </p:panel>

                </p:dataGrid>

                <p:dialog header="Product Info" widgetVar="productDialog" modal="true" showEffect="fade" hideEffect="fade"
                          resizable="false">
                    <p:outputPanel id="productDetail" style="text-align:center;">
                        <p:panelGrid columns="2" rendered="#{not empty dataGridView.selectedProduct}"
                                     columnClasses="label,value">
                            <f:facet name="header">
                                <p:graphicImage name="demo/images/product/#{dataGridView.selectedProduct.image}"/>
                            </f:facet>

                            <h:outputText value="Id:"/>
                            <h:outputText value="#{dataGridView.selectedProduct.id}"/>

                            <h:outputText value="Name:"/>
                            <h:outputText value="#{dataGridView.selectedProduct.name}"/>

                            <h:outputText value="Price:"/>
                            <h:outputText value="$#{dataGridView.selectedProduct.price}"/>

                            <h:outputText value="Stock:"/>
                            <h:outputText value="#{dataGridView.selectedProduct.inventoryStatus}"/>
                        </p:panelGrid>
                    </p:outputPanel>
                </p:dialog>
            </h:form>
        </div>
    </ui:define>

</ui:composition>